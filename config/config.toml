# ATS Checker configuration (TOML)
#
# This file replaces the legacy `config.json`.
#
# Notes:
# - Most paths can be relative; the app will normalize them to absolute paths.
# - `tesseract_cmd` is optional. Use "" (empty string) to mean "unset".
# - Scoring weights are stored in a separate TOML file (see paths.scoring_weights_file).
# - Multi-agent settings live under [ai.agents.*].

[paths]
output_folder = "workspace/output"
input_resumes_folder = "workspace/input_resumes"
job_descriptions_folder = "workspace/job_descriptions"
job_search_results_folder = "workspace/job_search_results"

# State and saved searches (TOML)
state_file = "data/processed_resumes_state.toml"
saved_searches_file = "data/saved_searches.toml"

# OCR
tesseract_cmd = ""

# Scoring
scoring_weights_file = "config/scoring_weights.toml"


[ai]
# Only "gemini" is supported right now.
provider = "gemini"

# Default model settings (used unless an agent overrides them)
model_name = "gemini-1.5-flash-latest"
temperature = 0.7
top_p = 0.95
top_k = 40
max_output_tokens = 8192

# Multi-agent configuration.
# Each agent may override model_name/temperature/top_p/top_k/max_output_tokens.

[ai.agents.enhancer]
role = "resume_enhancement"
provider = "gemini"
model_name = "gemini-1.5-flash-latest"

[ai.agents.job_summarizer]
role = "job_summary"
provider = "gemini"
model_name = "gemini-1.5-flash-latest"

[ai.agents.scorer]
role = "scoring"
provider = "gemini"
model_name = "gemini-1.5-flash-latest"

[ai.agents.reviser]
role = "resume_revision"
provider = "gemini"
model_name = "gemini-1.5-flash-latest"


[processing]
# How many versions to generate per job description
num_versions_per_job = 1

# Iterative improvement loop (revise until target score reached)
iterate_until_score_reached = false
target_score = 80.0
max_iterations = 3
min_score_delta = 0.1

# Iteration strategy (advanced)
# - "best_of": keep best candidate seen so far; stop on target/no_progress/max_iterations
# - "first_hit": stop immediately once target_score is reached
# - "patience": stop if no improvement is seen for N iterations (best overall for stability)
iteration_strategy = "patience"
iteration_patience = 2
stop_on_regression = true
max_regressions = 2

# Structured output format for enhanced resume data:
# - "json": JSON only
# - "toml": TOML preferred (fallback to JSON if TOML write fails)
# - "both": write both TOML and JSON
structured_output_format = "toml"

# Schema validation (optional)
# If enabled, the app may validate the AI-produced structured resume output and retry once
# (depending on processing.schema_validation_max_retries).
schema_validation_enabled = false
resume_schema_path = "config/resume_schema.json"
schema_validation_max_retries = 1

# Recommendations (optional)
# If enabled, the app may generate actionable recommendations from score breakdowns
# and attach them into the structured output under `_scoring.recommendations`.
recommendations_enabled = false
recommendations_max_items = 5

# Output layout
# Controls how outputs are organized under `paths.output_folder`.
# Available placeholders:
# - {resume_name}  (filename without extension)
# - {job_title}    (job description filename without extension, or "generic")
# - {timestamp}    (YYYYMMDD_HHMMSS)
output_subdir_pattern = "{resume_name}/{job_title}/{timestamp}"

# If true, write a separate score summary file alongside outputs.
write_score_summary_file = true


[job_search]
max_job_results_per_search = 50
